\section{OpenCV Introduction}


\centeredlargetext{white}{black}{
OpenCV Introduction
}


\begin{frame}
\frametitle{OpenCV}
\begin{center}
\begin{itemize}
\item We will be using OpenCV 2.2 (from subversion)
\item The new C++ interface will be used when possible
\item We assume you have some prior experience with OpenCV
\item \ldots but we will cover the basics in case you don't
\end{itemize}
\end{center}
\end{frame}


\begin{frame}
\frametitle{Include Header Files}
\framesubtitle{OpenCVIntroduction/exercise1/BasicFilteringOpenCV.cxx}
\begin{center}
We need to include the OpenCV headers
\lstlistingwithnumber{19}{20}{BasicFilteringOpenCV.cxx}
\pause
\vspace{1 em}
and standard library headers for {\tt cout} and {\tt string}
\lstlistingwithnumber{22}{23}{BasicFilteringOpenCV.cxx}
\end{center}
\end{frame}


\begin{frame}
\frametitle{The Main function}
\framesubtitle{OpenCVIntroduction/exercise1/BasicFilteringOpenCV.cxx}
\begin{center}
\begin{itemize}
\lstlistingwithnumber{26}{52}{BasicFilteringOpenCV.cxx}
\end{itemize}
\end{center}
\end{frame}


\begin{frame}
\frametitle{Loading an Image / Applying a Filter}
\framesubtitle{OpenCVIntroduction/exercise1/BasicFilteringOpenCV.cxx}
\begin{center}
\begin{itemize}
\item If no arguments, print usage and exit \\
Note: {\tt argv[0]} contains the executable name
\lstlistingwithnumber{28}{32}{BasicFilteringOpenCV.cxx}
\pause
\item Load an image from the specified file into a matrix object
\lstlistingwithnumber{34}{34}{BasicFilteringOpenCV.cxx}
\pause
\item Create a matrix for the output and apply a median filter
\lstlistingwithnumber{35}{36}{BasicFilteringOpenCV.cxx}
\item The last argument represent the size of the filter, $9\times9$ in this case
\end{itemize}
\end{center}
\end{frame}


\begin{frame}
\frametitle{Displaying an Image}
\framesubtitle{OpenCVIntroduction/exercise1/BasicFilteringOpenCV.cxx}
\begin{center}
\begin{itemize}
\item If no output file is specified, use HighGUI to display the resulting image.
\lstlistingwithnumber{38}{45}{BasicFilteringOpenCV.cxx}
\end{itemize}
\end{center}
\end{frame}


\begin{frame}
\frametitle{Create the Display Window}
\framesubtitle{OpenCVIntroduction/exercise1/BasicFilteringOpenCV.cxx}
\begin{center}
\begin{itemize}
\item A title string is used to identify the GUI window.
\lstlistingwithnumber{40}{40}{BasicFilteringOpenCV.cxx}
\item Create a named window.
  \begin{itemize}
  \item {\tt\small CV\_WINDOW\_FREERATIO} is needed for display using OpenGL.
  \end{itemize}
\lstlistingwithnumber{41}{41}{BasicFilteringOpenCV.cxx}
\item Resize the window to match the image size.
  \begin{itemize}
  \item {\tt\small cvResizeWindow()} is a C function with no C++ API equivalent.
  \item It is not in the {\tt\small cv} namespace.
  \item It requires a {\tt\small const char*} name, provided by {\tt\small std::string::c\_str()}.
  \item The +50 in height to account for the height of tool/status bars.
  \end{itemize}
\lstlistingwithnumber{42}{42}{BasicFilteringOpenCV.cxx}
\end{itemize}
\end{center}
\end{frame}


\begin{frame}
\frametitle{Display and Wait}
\framesubtitle{OpenCVIntroduction/exercise1/BasicFilteringOpenCV.cxx}
\begin{center}
\begin{itemize}
\item Show the image in the previously created window.
\lstlistingwithnumber{43}{43}{BasicFilteringOpenCV.cxx}
\item Wait for the user to press a key, then continue.
\lstlistingwithnumber{44}{44}{BasicFilteringOpenCV.cxx}
\end{itemize}
\end{center}
\end{frame}


\begin{frame}
\frametitle{Saving an Image}
\framesubtitle{OpenCVIntroduction/exercise1/BasicFilteringOpenCV.cxx}
\begin{center}
\begin{itemize}
\item If an output file is specified, write the image to the specified file
\lstlistingwithnumber{46}{49}{BasicFilteringOpenCV.cxx}
\end{itemize}
\end{center}
\end{frame}


\begin{frame}[fragile]
\frametitle{Exercise 1}
\framesubtitle{OpenCVIntroduction/exercise1/BasicFilteringOpenCV.cxx}
\begin{center}
\begin{itemize}
\item Replace the median filter with a Canny edge detector
\lstlistingwithnumber{35}{36}{BasicFilteringOpenCV.cxx}
\pause
\item Hint: The OpenCV Canny function has this signature
\begin{lstlisting}[numbers=none,xleftmargin=0pt]
void Canny(const Mat& image, Mat& edges, double threshold1, double threshold2);
\end{lstlisting}
\pause
\item Canny requires grayscale image input, but our images are color
\item Hint: Use this function to convert a color space
\begin{lstlisting}[numbers=none,xleftmargin=0pt]
void cvtColor(const Mat& src, Mat& dst, int code);
\end{lstlisting}
\item Use {\tt CV\_BGR2GRAY} for {\tt code} to convert BGR color to gray.
\end{itemize}
\end{center}
\end{frame}


\begin{frame}
\frametitle{Exercise 1: Answer}
\framesubtitle{OpenCVIntroduction/exercise1/BasicFilteringOpenCVAnswer.cxx}
\begin{center}
\begin{itemize}
\lstlistingwithnumber{34}{38}{BasicFilteringOpenCVAnswer.cxx}
\end{itemize}
\end{center}
\end{frame}
